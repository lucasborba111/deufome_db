{"version":3,"sources":["./src/app/postar/postar-routing.module.ts","./src/app/postar/postar.module.ts","./src/app/postar/postar.page.ts","./src/app/postar/postar.page.scss","./src/app/postar/postar.page.html"],"names":[],"mappings":"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","file":"src_app_postar_postar_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { PostarPage } from './postar.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PostarPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PostarPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PostarPageRoutingModule } from './postar-routing.module';\r\n\r\nimport { PostarPage } from './postar.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PostarPageRoutingModule\r\n  ],\r\n  declarations: [PostarPage]\r\n})\r\nexport class PostarPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\r\nimport { WebView } from '@ionic-native/ionic-webview/ngx';\r\nimport { AlertController, NavController } from '@ionic/angular';\r\nimport firebase from 'firebase/app';\r\nimport { Storage } from '@ionic/storage';\r\nimport firebaseConfig from '../firebase/firebase';\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n\r\n@Component({\r\n  selector: 'app-postar',\r\n  templateUrl: './postar.page.html',\r\n  styleUrls: ['./postar.page.scss'],\r\n})\r\nexport class PostarPage implements OnInit {\r\n\r\n  \r\n\r\n  cameraOptions: CameraOptions = {\r\n    quality: 100,\r\n    allowEdit: false,\r\n    correctOrientation: true,\r\n    destinationType: this.camera.DestinationType.FILE_URI,\r\n    encodingType: this.camera.EncodingType.JPEG,\r\n    mediaType: this.camera.MediaType.PICTURE\r\n  }\r\n\r\n  galleryOptions: CameraOptions = {\r\n    sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\r\n    destinationType: this.camera.DestinationType.FILE_URI,\r\n    quality: 100,\r\n    allowEdit: true,\r\n    encodingType: this.camera.EncodingType.JPEG,\r\n    mediaType: this.camera.MediaType.PICTURE,\r\n    correctOrientation: true\r\n  }\r\n\r\n  post = {\r\n    photo: '',\r\n    title: '',\r\n    description: '',\r\n  }\r\n\r\n  posts = []\r\n\r\n\r\n  constructor(\r\n    private storage: Storage,\r\n    private webview: WebView,\r\n    private camera: Camera,\r\n    private alertCtrl: AlertController,\r\n    private navCtrl: NavController,\r\n    ) { }\r\n\r\n  \r\n  async choosePhotos(){\r\n    let alertBox = await this.alertCtrl.create({\r\n      header: 'Choose from',\r\n      buttons: [\r\n        {\r\n          text: 'Camera',\r\n          handler: () => {\r\n            this.camera.getPicture(this.cameraOptions).then(res=>{\r\n              console.log('response = ', res);\r\n              let finalImg = this.webview.convertFileSrc(res);\r\n              console.log('finalImg = ', finalImg);\r\n              this.post.photo = finalImg;\r\n            })\r\n          }\r\n        },\r\n        {\r\n          text: 'Gallery',\r\n          handler: () => {\r\n            this.camera.getPicture(this.galleryOptions).then(res=>{\r\n              console.log('response =', res);\r\n              let finalImg = this.webview.convertFileSrc(res);\r\n              console.log('finalImg = ', finalImg);\r\n              this.post.photo = finalImg;\r\n              this.uploadImage(finalImg);\r\n            })\r\n          }\r\n        },\r\n      ],\r\n    })\r\n\r\n    await alertBox.present();\r\n  }\r\n\r\n  uploadImage(image){\r\n    console.log('image = ', image);\r\n    let randomname = this.randomnumberGenerator();\r\n    return new Promise<any>((resolve, reject) =>{\r\n      let storageRef = firebase.storage().ref();\r\n      let imageRef = storageRef.child('posts/' + randomname);\r\n      \r\n      this.toDataURL(image, (dataUrl) =>{\r\n        console.log(dataUrl);\r\n        imageRef.putString(dataUrl, 'data_url')\r\n        .then(snapshot => {\r\n          //console.log(resolve(snapshot.downloadURL));\r\n          imageRef.getDownloadURL().then(url=>{\r\n            console.log(url);\r\n            this.post.photo = url;\r\n          });\r\n        }, err =>{\r\n          reject(err);\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  toDataURL(url, callback) {\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.onload = function() {\r\n      var reader = new FileReader();\r\n      reader.onloadend = function() {\r\n        callback(reader.result);\r\n      }\r\n      reader.readAsDataURL(xhr.response);\r\n    },\r\n    xhr.open('GET', url);\r\n    xhr.responseType = 'blob';\r\n    xhr.send();\r\n  }\r\n\r\n  randomnumberGenerator(){\r\n    var text = \"\";\r\n      var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefgjijklmnopqrstuvwxyz0123456789\";\r\n      for(var i = 0; i < 10; i++)\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n        return text;\r\n  }\r\n\r\n\r\n  submitPost(){\r\n    console.log('running');\r\n    if (this.post.photo == ''){\r\n      alert('insira a foto')\r\n\r\n    }else{\r\n      if(this.post.title == ''){\r\n        alert('insira o titulo')\r\n      }else{\r\n        if(this.post.description == ''){\r\n          alert('insira a descrição')\r\n\r\n        }else{\r\n         \r\n         //inserindo no firebase\r\n\r\n         firebase.database().ref('posts').push(this.post).then(res=>{\r\n           console.log('pushed', res);\r\n           this.navCtrl.navigateRoot('home');\r\n         });\r\n         \r\n          //this.storage.get('postArray').then(res=>{\r\n           // console.log('res = ',res);\r\n          //  if(res ==null){\r\n            //  this.posts = [];\r\n           // }else{\r\n             // this.posts = res;\r\n           // }\r\n            //.posts.push(this.post);\r\n            //this.storage.set('postsArray', this.posts);\r\n            //console.log('array = ', this.posts);\r\n           // this.navCtrl.navigateRoot('home');\r\n          //})\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  async ngOnInit() {\r\n    await this.storage.create();\r\n  }\r\n}\r\n","export default \".wrapper {\\n  width: 90%;\\n  margin: 10% auto;\\n}\\n\\n.photoDiv {\\n  width: 100%;\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n.imgDiv {\\n  width: 35%;\\n  border-radius: 7px;\\n  background: #e4e4e4;\\n  display: flex;\\n  height: 70px;\\n  align-items: center;\\n  justify-content: center;\\n  margin-right: 10px;\\n}\\n\\n.imgDiv ion-icon {\\n  font-size: 30px;\\n  color: black;\\n}\\n\\n.formBody {\\n  margin: 10% auto;\\n}\\n\\nion-item {\\n  margin-bottom: 5%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3Rhci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxVQUFBO0VBQ0EsZ0JBQUE7QUFDRjs7QUFFQTtFQUNFLFdBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7QUFDRjs7QUFFQTtFQUNFLFVBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EsYUFBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7RUFDQSxZQUFBO0FBQ0Y7O0FBRUE7RUFDQSxnQkFBQTtBQUNBOztBQUNBO0VBQ0UsaUJBQUE7QUFFRiIsImZpbGUiOiJwb3N0YXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLndyYXBwZXJ7XHJcbiAgd2lkdGg6IDkwJTtcclxuICBtYXJnaW46IDEwJSBhdXRvO1xyXG59XHJcblxyXG4ucGhvdG9EaXZ7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG59XHJcblxyXG4uaW1nRGl2e1xyXG4gIHdpZHRoOiAzNSU7XHJcbiAgYm9yZGVyLXJhZGl1czogN3B4O1xyXG4gIGJhY2tncm91bmQ6ICNlNGU0ZTQ7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBoZWlnaHQ6IDcwcHg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbn1cclxuXHJcbi5pbWdEaXYgaW9uLWljb257XHJcbiAgZm9udC1zaXplOiAzMHB4O1xyXG4gIGNvbG9yOiBibGFjaztcclxufVxyXG5cclxuLmZvcm1Cb2R5e1xyXG5tYXJnaW46IDEwJSBhdXRvO1xyXG59XHJcbmlvbi1pdGVte1xyXG4gIG1hcmdpbi1ib3R0b206IDUlO1xyXG59Il19 */\";","export default \"<ion-content>\\r\\n<div class=\\\"wrapper\\\">\\r\\n<div class=\\\"photoDiv\\\">\\r\\n  <div class=\\\"imgDiv\\\" (click)=\\\"choosePhotos()\\\" *ngIf=\\\"post.photo == '' \\\">\\r\\n    <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"post.photo != '' \\\">\\r\\n<img src=\\\"{{ post.photo}}\\\"/>\\r\\n</div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"formBody\\\">\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"floating\\\">Title</ion-label>\\r\\n    <ion-input type=\\\"text\\\" [(ngModel)]=\\\"post.title\\\">\\r\\n    </ion-input>\\r\\n  </ion-item>\\r\\n</div>\\r\\n<ion-item>\\r\\n  <ion-label position=\\\"floating\\\">description</ion-label>\\r\\n  <ion-input type=\\\"text\\\" [(ngModel)]=\\\"post.description\\\">\\r\\n  </ion-input>\\r\\n</ion-item>\\r\\n<div>\\r\\n  <ion-button (click)=\\\"submitPost()\\\">Save</ion-button>\\r\\n</div>\\r\\n</ion-content>\\r\\n\";"],"sourceRoot":"webpack:///"}